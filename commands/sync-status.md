---
description: Plans.mdの進捗集計・状態同期（Cursor報告用）
---

# /sync-status - 状態同期・進捗サマリー

Plans.md の現在の状態を確認し、進捗サマリーを出力します。
Cursor（PM）への状況報告に使用します。

## バイブコーダー向け（こう言えばOK）

- 「**今の進捗まとめて**」→ このコマンド
- 「**Cursorに状況を報告したい**」→ 貼り付けやすいサマリーを出します
- 「**どこまで終わった？**」→ TODO/WIP/完了を集計して見える化します

## できること（成果物）

- Plans.md のマーカーを集計して、進捗率と状況を短く出力
- “次にやるべきこと”が迷子にならない状態を作る

---

## 実行フロー

### Step 1: Plans.md の読み込み

```bash
cat Plans.md
```

### Step 2: タスク状態の集計

Plans.md から以下のマーカーを集計：

| マーカー | カテゴリ |
|---------|---------|
| `cc:TODO` | Claude Code 未着手 |
| `cc:WIP` | Claude Code 作業中 |
| `cc:完了` | Claude Code 完了 |
| `pm:確認済` | PM 確認済み（互換: `cursor:確認済`） |
| `pm:依頼中` | PM から依頼中（互換: `cursor:依頼中`） |
| `cursor:確認済` | （互換）`pm:確認済` と同義 |
| `cursor:依頼中` | （互換）`pm:依頼中` と同義 |
| `blocked` | ブロック中 |

### Step 3: サマリーの生成

以下のフォーマットで出力：

---

```markdown
## 📊 進捗サマリー

**更新日時**: {{YYYY-MM-DD HH:MM}}
**ブランチ**: {{現在のブランチ}}

---

### タスク状況

| ステータス | 件数 |
|-----------|------|
| 🔴 未着手 (`cc:TODO`) | {{件数}} |
| 🟡 作業中 (`cc:WIP`) | {{件数}} |
| 🟢 完了 (`cc:完了`) | {{件数}} |
| ✅ 確認済 (`pm:確認済`) | {{件数}} |
| ⏳ 依頼中 (`pm:依頼中`) | {{件数}} |
| 🚫 ブロック (`blocked`) | {{件数}} |

**進捗率**: {{完了 + 確認済}} / {{全タスク数}} ({{パーセント}}%)

---

### 現在の作業中タスク

{{cc:WIP のタスク一覧}}

---

### 次に着手すべきタスク

{{cc:TODO または pm:依頼中（互換: cursor:依頼中） の優先タスク}}

---

### ブロック中のタスク（要対応）

{{blocked のタスク一覧と理由}}

---

### 最近完了したタスク

{{直近5件の cc:完了 タスク}}
```

---

### Step 4: 異常検知

以下の状況を検知した場合は警告：

> ⚠️ **注意が必要な状況**
>
> - `cc:WIP` が複数存在（同時に複数タスクを作業中）
> - `blocked` タスクが長期間放置されている
> - `pm:依頼中`（互換: `cursor:依頼中`）が未処理のまま残っている

---

## オプション: Plans.md の整理提案

タスクが増えてきた場合、整理を提案：

> 💡 **Plans.md の整理提案**
>
> 完了タスクが {{件数}} 件あります。
> アーカイブセクションに移動しますか？
>
> ```markdown
> ## アーカイブ（完了済み）
> - [x] タスク1 `pm:確認済` (2024-01-15)
> - [x] タスク2 `pm:確認済` (2024-01-14)
> ```

---

## 注意事項

- **Plans.md を編集しない**: このコマンドは読み取り専用
- **正確な集計**: マーカーの typo に注意
- **ブロックタスクを優先報告**: 対応が必要なものを目立たせる
