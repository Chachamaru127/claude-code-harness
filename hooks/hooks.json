{
  "$schema": "https://json.schemastore.org/claude-code-hooks.json",
  "description": "cursor-cc-plugins: 2ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ç”¨ãƒ•ãƒƒã‚¯",
  "hooks": {
    "SessionStart": [
      {
        "matcher": "startup",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/session-init.sh",
            "statusMessage": "ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆæœŸåŒ–ä¸­..."
          },
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/session-monitor.sh",
            "statusMessage": "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ…‹ã‚’ç¢ºèªä¸­..."
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/auto-cleanup-hook.sh",
            "statusMessage": "ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãƒã‚§ãƒƒã‚¯ä¸­..."
          },
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/track-changes.sh",
            "statusMessage": "å¤‰æ›´ã‚’è¨˜éŒ²ä¸­..."
          },
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/auto-test-runner.sh",
            "statusMessage": "ãƒ†ã‚¹ãƒˆæ¨å¥¨ã‚’ç¢ºèªä¸­..."
          },
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/plans-watcher.sh",
            "statusMessage": "Plans.md å¤‰æ›´ã‚’ç›£è¦–ä¸­..."
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/session-summary.sh",
            "statusMessage": "ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚µãƒãƒªãƒ¼ã‚’ç”Ÿæˆä¸­..."
          },
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/collect-cleanup-context.sh",
            "statusMessage": "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ…‹ã‚’åé›†ä¸­..."
          },
          {
            "type": "prompt",
            "prompt": "You are a cleanup recommendation assistant for a 2-agent workflow (Cursor PM + Claude Code Worker).\n\nAnalyze the project context and determine if cleanup should be recommended.\n\nProject Context:\n$ARGUMENTS\n\n## Evaluation Criteria\n\nRecommend cleanup (/cleanup command) when ANY of the following conditions are met:\n\n1. **Completed Task Accumulation**: 10+ completed tasks (cc:å®Œäº† or cursor:ç¢ºèªæ¸ˆ)\n2. **Old Completed Tasks**: Completed tasks older than 7 days exist\n3. **Large Plans.md**: Over 200 lines\n4. **Large Session Log**: session-log.md over 500 lines\n5. **Large CLAUDE.md**: Over 100 lines (suggest splitting to .claude/rules/)\n\n## Response Format\n\nRespond with JSON only:\n```json\n{\n  \"decision\": \"approve\",\n  \"reason\": \"Brief explanation\",\n  \"systemMessage\": \"Optional: ğŸ§¹ Cleanup recommended: [specific suggestion] (run /cleanup)\"\n}\n```\n\n- If cleanup IS recommended: Include a `systemMessage` with the specific recommendation\n- If cleanup is NOT needed: Set `systemMessage` to empty string or omit it\n- Always set `decision` to `approve` (we don't want to block the stop)\n\nAnalyze the context and provide your recommendation.",
            "timeout": 30
          }
        ]
      }
    ]
  }
}
