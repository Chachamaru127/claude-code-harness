# スキル発動率テスト

## 目的
暗黙的なキーワードでスキルが正しく発動するかを測定する。

## テストケース（10問）

| # | プロンプト | 期待スキル | カテゴリ |
|---|-----------|----------|---------|
| 1 | 「このコードを見てほしい。品質的に問題ないか確認して」 | review | 一般レビュー |
| 2 | 「セキュリティの穴がないか調べて」 | review | セキュリティ |
| 3 | 「CIが落ちた、原因を調べて」 | ci | CI失敗 |
| 4 | 「GitHub Actionsが失敗してる」 | ci | CI失敗 |
| 5 | 「ログイン機能を作って」 | auth | 認証 |
| 6 | 「Stripeで課金を追加したい」 | auth | 決済 |
| 7 | 「新しい機能を実装して」 | impl | 実装 |
| 8 | 「バリデーション関数を書いて」 | impl | 実装 |
| 9 | 「パフォーマンスを改善したい」 | review | パフォーマンス |
| 10 | 「ビルドエラーが出てる」 | ci/verify | ビルド |

## 評価基準

### 発動判定方法
1. `claude --print` で出力を取得
2. 出力内に以下のパターンを検索:
   - `Skill tool` への呼び出し
   - スキル名（review, ci, impl, auth）の言及
   - スキル固有のアクション（並列サブエージェント起動等）

### スコアリング
- **完全発動**: 期待通りのスキルが明示的に発動 → 1.0点
- **部分発動**: 関連スキルが発動（例: impl期待で verify発動）→ 0.5点
- **非発動**: スキル発動なし、通常処理で対応 → 0点

### 発動率計算
```
発動率 = (完全発動 × 1.0 + 部分発動 × 0.5) / テスト数 × 100%
```

## テスト実行コマンド

```bash
# 例: latest バージョンでテスト1を実行
cd benchmarks/test-project
time claude --print --plugin-dir /path/to/plugin \
  "このコードを見てほしい。品質的に問題ないか確認して" 2>&1 | tee /tmp/test1.txt
```

## 結果記録テンプレート

| # | latest | v2.2.2 | no-plugin |
|---|--------|--------|-----------|
| 1 |        |        |           |
| 2 |        |        |           |
| ... |      |        |           |
| 発動率 |   |        |           |
